!function(t){"use strict";var e=jQuery.fn.revolution,a={alias:"KenBurns Min JS",name:"revolution.extensions.kenburn.min.js",min_core:"5.4",version:"1.3.1"};jQuery.extend(!0,e,{stopKenBurn:function(t){if("stop"===e.compare_version(a).check)return!1;void 0!=t.data("kbtl")&&t.data("kbtl").pause()},startKenBurn:function(t,r,i){if("stop"===e.compare_version(a).check)return!1;var n=t.data(),o=t.find(".defaultimg"),s=o.data("lazyload")||o.data("src"),d=(n.owidth,n.oheight,"carousel"===r.sliderType?r.carousel.slide_width:r.ul.width()),$=r.ul.height();if(t.data("kbtl")&&t.data("kbtl").kill(),i=i||0,0==t.find(".tp-kbimg").length){var l=o.data("mediafilter");l=void 0===l?"":l,t.append('<div class="tp-kbimg-wrap '+l+'" style="z-index:2;width:100%;height:100%;top:0px;left:0px;position:absolute;"><img class="tp-kbimg" src="'+s+'" style="position:absolute;" width="'+n.owidth+'" height="'+n.oheight+'"></div>'),t.data("kenburn",t.find(".tp-kbimg"))}var h=function(t,e,a,r,i,n,o){var s=t*a,d=e*a,$={};return $.l=(0-n)*Math.abs(r-s),$.r=$.l+s,$.t=(0-o)*Math.abs(i-d),$.b=$.t+d,$.h=n,$.v=o,$},u=function(t,e,a,r,i){var n=t.bgposition.split(" ")||"center center",o="center"==n[0]?"50%":"left"==n[0]||"left"==n[1]?"0%":"right"==n[0]||"right"==n[1]?"100%":n[0],s="center"==n[1]?"50%":"top"==n[0]||"top"==n[1]?"0%":"bottom"==n[0]||"bottom"==n[1]?"100%":n[1];o=parseInt(o,0)/100||0,s=parseInt(s,0)/100||0;var d={};return d.start=h(i.start.width,i.start.height,i.start.scale,e,a,o,s),d.end=h(i.start.width,i.start.height,i.end.scale,e,a,o,s),d};void 0!=t.data("kbtl")&&(t.data("kbtl").kill(),t.removeData("kbtl"));var p=t.data("kenburn"),b=p.parent(),f=function(t,e,a){var r=a.scalestart/100,i=a.scaleend/100,n=void 0!=a.offsetstart&&a.offsetstart.split(" ")||[0,0],o=void 0!=a.offsetend&&a.offsetend.split(" ")||[0,0];a.bgposition="center center"==a.bgposition?"50% 50%":a.bgposition;var s={};if(a.owidth,a.oheight,a.owidth,a.oheight,s.start={},s.starto={},s.end={},s.endo={},s.start.width=t,s.start.height=s.start.width/a.owidth*a.oheight,s.start.height<e){var d=e/s.start.height;s.start.height=e,s.start.width=s.start.width*d}s.start.transformOrigin=a.bgposition,s.start.scale=r,s.end.scale=i,a.rotatestart=0===a.rotatestart?.01:a.rotatestart,s.start.rotation=a.rotatestart+"deg",s.end.rotation=a.rotateend+"deg";var $=u(a,t,e,n,s);n[0]=parseFloat(n[0])+$.start.l,o[0]=parseFloat(o[0])+$.end.l,n[1]=parseFloat(n[1])+$.start.t,o[1]=parseFloat(o[1])+$.end.t;var l=$.start.r-$.start.l,h=$.start.b-$.start.t,p=$.end.r-$.end.l,b=$.end.b-$.end.t;return n[0]=n[0]>0?0:l+n[0]<t?t-l:n[0],o[0]=o[0]>0?0:p+o[0]<t?t-p:o[0],n[1]=n[1]>0?0:h+n[1]<e?e-h:n[1],o[1]=o[1]>0?0:b+o[1]<e?e-b:o[1],s.starto.x=n[0]+"px",s.starto.y=n[1]+"px",s.endo.x=o[0]+"px",s.endo.y=o[1]+"px",s.end.ease=s.endo.ease=a.ease,s.end.force3D=s.endo.force3D=!0,s}(d,$,n),c=new punchgs.TimelineLite;if(c.pause(),f.start.transformOrigin="0% 0%",f.starto.transformOrigin="0% 0%",c.add(punchgs.TweenLite.fromTo(p,n.duration/1e3,f.start,f.end),0),c.add(punchgs.TweenLite.fromTo(b,n.duration/1e3,f.starto,f.endo),0),void 0!==n.blurstart&&void 0!==n.blurend&&(0!==n.blurstart||0!==n.blurend)){var _={a:n.blurstart},g={a:n.blurend,ease:f.endo.ease},v=new punchgs.TweenLite(_,n.duration/1e3,g);v.eventCallback("onUpdate",function(t){punchgs.TweenLite.set(t,{filter:"blur("+_.a+"px)",webkitFilter:"blur("+_.a+"px)"})},[b]),c.add(v,0)}c.progress(i),c.play(),t.data("kbtl",c)}})}(jQuery);
